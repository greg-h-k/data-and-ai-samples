# This values.yaml file demonstrates how to use the basic chart with a single, pre-created secret.
# Secrets must be set manually or via External Secrets Operator like https://external-secrets.io/latest or any other secret management tool.
langfuse:

  encryptionKey:
    secretKeyRef:
      name: langfuse
      key: encryption-key

  salt:
    secretKeyRef:
      name: langfuse
      key: salt

  nextauth:
    # ⚠️ UPDATE THIS: Replace with your domain from terraform.tfvars
    # Format: https://YOUR_SUBDOMAIN.your-domain.example.com/
    url: https://langfuse.your-domain.example.com/  # CHANGE THIS
    secret:
      secretKeyRef:
        name: langfuse
        key: nextauth-secret

  ingress:
    annotations:
      # use group name to join existing load balancer 
      kubernetes.io/ingress.class: alb
      alb.ingress.kubernetes.io/group.name: grindstone-ingress
      alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}]'
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      # alb.ingress.kubernetes.io/certificate-arn: <certARN>
    enabled: true
    # This requires an ingress controller to be installed in the cluster
    # For example, using the nginx ingress controller:
    # helm install nginx-ingress ingress-nginx/ingress-nginx
    ingressClassName: alb
    hosts:
    # ⚠️ UPDATE THIS: Replace with your domain from terraform.tfvars
    - host: langfuse.your-domain.example.com  # CHANGE THIS
      paths:
      - path: /
        pathType: Prefix

postgresql:
  auth:
    existingSecret: langfuse
    secretKeys:
      adminPasswordKey: postgresql-password
      userPasswordKey: postgresql-password

clickhouse:
  auth:
    existingSecret: langfuse
    existingSecretKey: clickhouse-password

redis:
  auth:
    existingSecret: langfuse
    existingSecretPasswordKey: redis-password

s3:
  auth:
    existingSecret: langfuse
    rootUserSecretKey: s3-user
    rootPasswordSecretKey: s3-password

